<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <title>{% block title %}Dublin Bus App{% endblock %}</title>
  {% load static %}


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
    <title>Add Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <!-- bootstrap icon stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>  
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>  
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>  
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">                   
    <script src="https://kit.fontawesome.com/80ab360573.js" crossorigin="anonymous"></script>
    <script type=”text/javascript” src=”https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js”></script>
    <link href=”https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css” rel=”stylesheet”>
    <script src=”https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js”> </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <!-- <script src="/build/jquery.datetimepicker.full.min.js"></script> -->
    <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js">
	</script>
	<script src=
"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js">
	</script>

	<!-- Include Moment.js CDN -->
	<script type="text/javascript" src=
"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js">
	</script>

	<!-- Include Bootstrap DateTimePicker CDN -->
	<link
		href=
"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"
		rel="stylesheet">

	<script src=
"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js">
		</script>

    <style>
        #map {
                height: 400px;
                width: auto;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                border-radius: 8px;

            }
            footer {
                position: fixed;
                height: 100px;
                bottom: 0;
                width: 100%;
        }

        .navbar-text {
          padding-right:5px;
        }
        #footer {
                position: absolute;
                
            }

        .custom-map-control-button,.custom-map-control-button1 {
        background-color: white;
        color: black;
        padding: 10px;
        width: 100px;
        height: 70px;
        border-radius: 5px;
        margin-left: 4px;
    }

    .sidepanel  {
        width: 0;
        position: fixed;
        z-index: 1;
        height: 100%;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
      }

.sidepanel a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
      }

.sidepanel a:hover {
      color: #f1f1f1;
}

.sidepanel .closebtn {
      position: absolute;
      top: 0;
      right: 25px;
      font-size: 36px;
    }



    </style>

</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">DublinBus</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="{% url 'index' %}">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">

          <!-- <a class="btn btn-primary" href="{% url 'logout' %}" role="button">Log Out</a> -->

          <a class="nav-link" onclick="openNav()">Weather</a>  
        
          <!-- <a class="nav-link" href="#">Current Weather</a> -->
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'about' %}">About Us</a>
        </li>
      </ul>
      <div class="mx-auto order-0">
        <i class="fas fa-bus" style="color:white; font-size: 40px;"></i>
        <!-- <a class="navbar-brand mx-auto" href="#">Navbar 2</a> -->
    </div>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'twitter' %}"><i class="bi bi-twitter" style="color:white; font-size: 25px;"></i>
          </a>
        </li>

          <!-- <a class="navbar-brand mx-auto" href="#">Navbar 2</a> -->
      {% if user.is_authenticated %}
        <span class="navbar-text">
        Hi {{ user.username }}, you are logged in! 
      </span>
        <li class="nav-item">
          <a class="btn btn-primary" href="{% url 'logout' %}" role="button">Log Out</a>
        </li>
      </ul>
      {% else %}
      <li class="nav-item">
        <a class="nav-link" href="{% url 'register' %}">Sign Up</a>
      </li>
      <li class="nav-item">
        <a class="btn btn-primary" href="{% url 'login' %}" role="button">Log In</a>

      </li>
        <!-- <p>You are not logged in</p>
        <a href="{% url 'login' %}">Log In</a> -->
      
      {% endif %}      
      
    </div>
  </nav>

  <div id="mySidepanel" class="sidepanel">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <div class="weather-outer" style="color: #f1f1f1; margin-left: 90px; margin-top: 100px;">
			<div class="title">
			  <h5 style="z-index: 1; color: #f1f1f1;">Weather</h5>
			</div>
			<div class="notification"></div>
			<div class="weather-container">
			  <div class="weather-icon">
			  </div>
			  <div class="temperature-value">
				<p>- °<span>C</span></p>
			  </div>
			  <div class="temperature-description">
				<p>-</p>
			  </div>
			  <div class="location"></div>
			</div>
		</div>
  </div>
  <main>
    {% block content %}
    {% endblock %}
    
  </main>
</body>
<!-- Footer -->
  <footer class="bg-light text-center text-lg-start" >
    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
      © 2022:
      <a class="text-dark" >XpressBusEgineering- Team 10</a>
    </div>
    <!-- Copyright -->
  </footer>

<!-- side pannel -->
<script>
  function openNav() {
  document.getElementById("mySidepanel").style.width = "250px";
}

function closeNav() {
  document.getElementById("mySidepanel").style.width = "0";
}

const locationEle = locationElement = document.querySelector(".location");
			const iconElement = document.querySelector(".weather-icon");
			const temperatureEle = document.querySelector(".temperature-value");
			const descriptionEle = document.querySelector(".temperature-description");



const weather = {};
weather.temperature = {
   unit: "celsius"
}


function ShowCurrentWeather(){

    fetch("https://api.openweathermap.org/data/2.5/weather?q=Ireland&units=metric&appid=17f166d4fd4137881f3c09b22dd04a7a")
        .then((response) => {
            return response.json();
        })
        .then((data) => {
			console.log("helllooooo", data.weather[0].description)
            weather.temperature.value = data.main.temp;
            weather.description = data.weather[0].description;
            weather.iconId =data.weather[0].icon;
            weather.city = 'Dublin City';
            weather.country = 'IE';
            console.log("dfvsvsdvc",data.weather.icon);
        }).then(function () {
        displayWeather();
    })
}

function displayWeather() {
    locationEle.innerHTML = "Dublin City";
    iconElement.innerHTML = `<img src="http://openweathermap.org/img/w/${weather.iconId}.png"/>`;
    temperatureEle.innerHTML = `${weather.temperature.value}°<span>C</span>`;
    descriptionEle.innerHTML = weather.description;
}

window.onload = function() {
    ShowCurrentWeather();
}


</script>
</html>
